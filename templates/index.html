<!DOCTYPE html>

<html lang="en">
    <head>
        <!-- <link href="/static/styles.css" rel="stylesheet"> -->
        <title>Photo App</title>
    
        <style>
            h1 {
                text-align:center;
            }

            .image-preview {
                width: 400px;
                min-height: 400px;
                border: 2px solid #dddddd;
                margin-top: 15px;

            

                /* Default text */
                display: flex;
                align-items: center;
                justify-content: center;
                font-weight: bold;
                color: #cccccc;
            }

            .result-preview {
                width: 400px;
                min-height: 400px;
                /* border: 2px solid #dddddd; */
                margin-top: 15px;

            

                /* Default text */
                display: flex;
                align-items: center;
                justify-content: center;
                font-weight: bold;
                color: #cccccc;
            }

            .image-preview__image {
                    display: none;
                    width: 100%;
                }
            .loader {
                animation: is-rotating 1s infinite;
                width: 50px;
                height: 50px;
                border: 6px solid #e5e5e5;
                border-radius:50%;
                border-top-color: #51d4db;
                display: none
            }

            @keyframes is-rotating {
            to {
                transform: rotate(1turn);
            }

            }

            #wrapper {
                display: flex;
                margin: auto;
                max-width: 80%;
                flex-wrap: wrap;
                justify-content: space-around;
                /* justify-content: center; */
                align-items: center;
            }

            #loader-anime{
                margin: 5px;
            }

            #image-upload{
                margin: 5px;
            }

            /* .loader{
                background: #000 url(static/loader1.gif) center;
                height: 200px;
                width: 200px;
                z-index: 100;
                display: none */
                /* position: fixed; */

            /* } */
        </style>

    </head>
    <body>
        {% if get_flashed_messages() %}
               {{ get_flashed_messages() | join(" ") }} 
        {% endif %}
        <!-- <div id="loading"></div>
        <div id="content"> -->
        <h1>Hi! Please upload your image</h1>
        
        <div id="wrapper">

            <div id="image-upload"> 
                <form method="post" enctype="multipart/form-data">
            
                    <input type="file" name="file" id="inpFile">
                    <input type="submit" value="Upload" id="upload">
                
                    <div class="image-preview" id="imagePreview">
                        <img src="" alt="Image Preview" class="image-preview__image">
                        <span class="image-preview__default-text">Image Preview</span>   
                    </div>
            
                </form>
            
            </div>
           <div>
               <h1> ==> </h1>
           </div>

           <div class="result-preview" id="imagePreview">
            <img src="" alt="Image Preview" class="image-preview__image">
            <span class="image-preview__default-text2" id="image-preview__default-text2">Image Preview</span> 
            <div class="loader" id="loader-anime"></div>  
        
            
            
        </div>
        
        <!-- <img src='static/jiminy.jpeg'> -->
        <img src="" alt="">
        <script>
            const inpFile = document.getElementById("inpFile");
            const previewContainer = document.getElementById("imagePreview");
            const previewImage = previewContainer.querySelector(".image-preview__image");
            const previewDefaultText = previewContainer.querySelector(".image-preview__default-text")

            inpFile.addEventListener("change", function() { 
                const file = this.files[0];

                if (file) {
                    const reader = new FileReader();

                    previewDefaultText.style.display = "none";
                    previewImage.style.display = "block";

                    reader.addEventListener("load", function() {
                        previewImage.setAttribute("src", this.result);
                    });

                    reader.readAsDataURL(file);

                } else {
                    previewDefaultText.style.display = null;
                    previewImage.style.display = null;
                    previewImage.setAttribute("src", "");
                }

            });

        </script>

    <script>
        const upload = document.getElementById("upload");
        const animationContainer = document.getElementById("loader-anime");
        const previewDefaultText2 = document.getElementById("image-preview__default-text2");

        upload.addEventListener("click", function() {
            animationContainer.style.display = "block";
            previewDefaultText2.style.display = "none";
        });
    </script>

    

       
    </body>
</html>